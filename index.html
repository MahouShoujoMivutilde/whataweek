<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<title>–ö–∞–∫–∞—è —Å–µ–π—á–∞—Å —É—á–µ–±–Ω–∞—è –Ω–µ–¥–µ–ª—è? –ß–µ—Ç–Ω–∞—è –∏–ª–∏ –Ω–µ—á–µ—Ç–Ω–∞—è?</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="noindex">
	<link rel="stylesheet" type="text/css" href="./normalize.css">
	<link rel="stylesheet" type="text/css" href="./bettertext.css">
	<link rel="stylesheet" type="text/css" href="./style.css">

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
	<link rel="manifest" href="/manifest.json">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="theme-color" content="#ffffff">
</head>

<body>
	<div class="main-wrap">
	
	<h1>–ö–∞–∫–∞—è —Å–µ–π—á–∞—Å —É—á–µ–±–Ω–∞—è –Ω–µ–¥–µ–ª—è?</h1>
	<p>–ö–æ–≥–¥–∞ —è –±—ã–ª —Å—Ç—É–¥–µ–Ω—Ç–æ–º, —è –≤—Å–µ–≥–¥–∞ –∑–∞–±—ã–≤–∞–ª –∫–∞–∫–∞—è —Å–µ–π—á–∞—Å –Ω–µ–¥–µ–ª—è –∏ –ø–æ –∫–∞–∫–æ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –º–Ω–µ –Ω—É–∂–Ω–æ —Ö–æ–¥–∏—Ç—å –Ω–∞ –ø–∞—Ä—ã. –ü–µ—Ä–µ–¥–æ –º–Ω–æ–π –∫–∞–∂–¥—ã–π —Ä–∞–∑ —Å—Ç–æ—è–ª –æ–¥–∏–Ω –∏ —Ç–æ—Ç-–∂–µ –≤–æ–ø—Ä–æ—Å: ¬´<em>–ß–µ—Ç–Ω–∞—è –∏–ª–∏ –Ω–µ—á–µ—Ç–Ω–∞—è –Ω–µ–¥–µ–ª—è?</em>¬ª. –¢–æ–≥–¥–∞ —è —Ä–µ—à–∏–ª —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç —Å–∞–π—Ç.</p>

	<noscript>
		<p class="red">‚ùóÔ∏è –í–∫–ª—é—á–∏—Ç–µ JavaScript –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–µ—Å—É—Ä—Å–∞!</p>
	</noscript>

	<div class="main-content">
		<h2>–°–µ–≥–æ–¥–Ω—è</h2>
		<ul>
			<li>
				üìÜ &nbsp;&nbsp;<span id="date"></span> ‚Äî <strong><span id="week"></span> –Ω–µ–¥–µ–ª—è –≤ –≥–æ–¥—É</strong>
			<li>
				üî¢ &nbsp;<mark>&nbsp;<strong><span id="red" class="red">–ù–ï</span>—á–µ—Ç–Ω–∞—è</strong>&nbsp;</mark>
				—É—á–µ–±–Ω–∞—è –Ω–µ–¥–µ–ª—è
				(‚Ññ<strong id="st_week"></strong>, <span id="years"></span> —É—á–µ–±–Ω—ã–π –≥–æ–¥)
		</ul>

		<p id="sep1">–ü–µ—Ä–≤–æ–µ —Å–µ–Ω—Ç—è–±—Ä—è ‚Äî –≤—Å–µ–≥–¥–∞ –Ω–µ—á–µ—Ç–Ω–∞—è –Ω–µ–¥–µ–ª—è</p>

		<br>
		<small>
			<p>
				‚ùóÔ∏è &nbsp;–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –±–µ—Ä—É—Ç—Å—è –∏–∑ —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–µ—Ç–Ω–æ—Å—Ç–∏ –Ω–µ–¥–µ–ª–∏.
			</p>
			<p>
				<span id="warnEndWeek">
					‚ÄºÔ∏è &nbsp;–ù–µ–¥–µ–ª—è –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –∫–æ–Ω—Ü—É, —Å–ª–µ–¥—É—é—â–∞—è –±—É–¥–µ—Ç <b><span id="red2" class="red">–ù–ï</span>–ß–ï–¢–ù–ê–Ø</b>, –Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π—Ç–µ.
				</span>
			</p>
		</small>

		<h4>–î—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</h4>
		<ul>
			<li><a href="https://lines98.ru/">–¶–≤–µ—Ç–Ω—ã–µ –ª–∏–Ω–∏–∏ 98 (–∏–≥—Ä–∞)</a></li>
			<li><a href="http://googledino.ru/">–ì—É–≥–ª –¥–∏–Ω–æ–∑–∞–≤—Ä (–∏–≥—Ä–∞)</a></li>
			<li><a href="https://checkadblock.ru/">–°–∞–π—Ç —Å —Ä–µ–∫–ª–∞–º–æ–π (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ AdBlock –∏ —Ç.–¥.)</a></li>
		</ul>

		<section>
			<small>
				–û—Ä–∏–≥–∏–Ω–∞–ª: 2017 ¬© <a href="https://whataweek.github.io/">–ö–∞–∫–∞—è —Å–µ–π—á–∞—Å –Ω–µ–¥–µ–ª—è?</a>, –∞–≤—Ç–æ—Ä <a href="https://ymatuhin.ru">–Æ—Ä–∏–π –ú–∞—Ç—é—Ö–∏–Ω</a>
			</small>
		</section>
	</div>

	</div>
	<script src="moment.min.js"></script>
	<script>
		moment.locale('ru');
		var maxWeek = 45;

		function getISOWeeks(y) {
			var d, isLeap;
			d = new Date(y, 0, 1);
			isLeap = new Date(y, 1, 29).getMonth() === 1;
			return d.getDay() === 4 || isLeap && d.getDay() === 3 ? 53 : 52
		}

		var curWeek = '',
			years = '';

		var today, year, week, prevYear, nextYear, this1sp, this1spF, prev1sp, prev1spF, chetnaya;

		function update() {
			today = moment();
			year = moment(today).format('YYYY')
			prevYear = moment(today).subtract(1, 'y').format('YYYY');
			nextYear = +year + 1 + ''

			this1sp = moment(year + '-09-01', 'YYYY-MM-DD');
			this1spF = this1sp.format('WW');
			prev1sp = moment(year + '-09-01', 'YYYY-MM-DD').subtract(1, 'year');
			prev1spF = prev1sp.format('WW');

			week = moment(today).format('WW');

			if (today.isBefore(this1sp)) {
				var daysInYear = getISOWeeks(+prevYear);
				years = prevYear + '/' + year;
				curWeek = daysInYear - prev1spF + +week;

			} else {
				years = year + '/' + nextYear;
				curWeek = week - this1spF + 1;
			}

			if (curWeek > maxWeek) {
				chetnaya = false
				return
			}

			chetnaya = !(curWeek % 2);
		}

		update();

		var _w = document.getElementById('week');
		var _d = document.getElementById('date');
		var _r = document.getElementById('red');
		var _r2 = document.getElementById('red2');
		var _wEW = document.getElementById('warnEndWeek');
		var _y = document.getElementById('years');
		var _stw = document.getElementById('st_week');
		var _sep1 = document.getElementById('sep1');

		function updateHTML() {
			update();

			_y.innerHTML = years;
			_w.innerHTML = moment(today).format('W');
			_d.innerHTML = moment(today).format('dddd, D MMMM YYYY, HH:mm a');
			_r.style.display = (chetnaya) ? 'none' : '';
			_r2.style.display = (!chetnaya) ? 'none' : '';
			_wEW.style.display = (+today.format('e') < 6) ? 'none' : '';
			_stw.innerHTML = (curWeek > maxWeek) ? '' : curWeek;

			_sep1.style.display = (curWeek > maxWeek || curWeek < 2) ? 'block' : 'none';
		}

		updateHTML();
		setInterval(updateHTML, 1000);
	</script>
</body>

</html>
